# Postman Collections для тестирования API

В этой директории находятся коллекции Postman для тестирования API сервиса управления подписками.

## Содержимое

1. `UserService.postman_collection.json` - коллекция для тестирования API управления пользователями
2. `SubscriptionService.postman_collection.json` - коллекция для тестирования API управления подписками

## Настройка окружения

1. Установите [Postman](https://www.postman.com/downloads/)
2. Импортируйте коллекции в Postman:
   - File -> Import -> File -> Выберите файлы коллекций
3. Создайте переменную окружения:
   - Нажмите на значок шестеренки (⚙️) в правом верхнем углу
   - Создайте новое окружение (например, "Local")
   - Добавьте переменную:
     - Name: `baseUrl`
     - Value: `http://localhost:8080`
   - Сохраните окружение
   - Выберите созданное окружение из выпадающего списка

## Тестовые данные

### Пользователи

```json
{
    "userName": "John Doe",
    "email": "john.doe@example.com"
}
```

### Подписки

```json
{
    "serviceName": "Netflix",
    "startDate": "2024-03-20T00:00:00",
    "endDate": "2024-04-20T00:00:00"
}
```

## Последовательность тестирования

1. Создайте пользователя (POST /users)
2. Получите информацию о пользователе (GET /users/{id})
3. Добавьте подписку (POST /users/{id}/subscriptions)
4. Получите список подписок пользователя (GET /users/{id}/subscriptions)
5. Получите ТОП-3 популярных подписок (GET /subscriptions/top)
6. Удалите подписку (DELETE /users/{id}/subscriptions/{sub_id})
7. Обновите информацию о пользователе (PUT /users/{id})
8. Удалите пользователя (DELETE /users/{id})

## Ожидаемые ответы

### Создание пользователя
- Status: 201 Created
- Body: Созданный пользователь с ID

### Получение пользователя
- Status: 200 OK
- Body: Информация о пользователе

### Обновление пользователя
- Status: 200 OK
- Body: Обновленная информация о пользователе

### Удаление пользователя
- Status: 204 No Content

### Добавление подписки
- Status: 201 Created
- Body: Созданная подписка с ID

### Получение подписок
- Status: 200 OK
- Body: Список подписок пользователя

### Удаление подписки
- Status: 204 No Content

### Получение ТОП-3 подписок
- Status: 200 OK
- Body: Список популярных подписок с количеством подписчиков

## Обработка ошибок

API возвращает следующие коды ошибок:

- 400 Bad Request - неверные входные данные
- 404 Not Found - ресурс не найден
- 409 Conflict - конфликт данных (например, email уже существует)

В случае ошибки в теле ответа будет содержаться сообщение с описанием проблемы. 